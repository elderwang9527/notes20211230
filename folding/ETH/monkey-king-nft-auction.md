![](./img/2022-02-12-09-26-06.png)  
tmk2.sol 是依赖，只修改了这两处

![](./img/2022-02-12-09-34-51.png)  
让 usermint function 暂停。

![](./img/2022-02-12-09-37-29.png)  
time 是结束时间，按秒计算

![](./img/2022-02-12-10-10-59.png)  
![](./img/2022-02-12-10-11-51.png)  
publicSale 函数有修饰符，isongoing，它设定了拍卖时间限定

![](./img/2022-02-12-10-32-20.png)  
分别给 3 个地址发币，15%\*66%=10%。

![](./img/2022-02-12-10-51-41.png)  
用于后面的 trade 合约调用。

![](./img/2022-02-12-10-57-31.png)  
没有这个 function，别人就不能给合约转以太。

### 下面是 trade 合约

![](./img/2022-02-12-11-05-32.png)  
先实例化 auction 合约。

![](./img/2022-02-12-11-09-51.png)  
把 nft 发到 trade 合约里。当映射值为 0 时代表的是在钱包的状态。

![](./img/2022-02-12-14-15-55.png)  
购买市场上正在出售的东西的方法，这里有个防止重入攻击的设置。
